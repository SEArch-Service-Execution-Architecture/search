syntax = "proto3";
package protobuf;

import "protobuf/app_message.proto";
import "protobuf/contracts.proto";

option go_package = "dc.uba.ar/this/search/protobuf";


/* 
    A ClientMiddleware can have multiple channels registered.
    This service is what a Middleware exposes to its users (not on the internet.)
*/
service ClientMiddleware {
    rpc RegisterChannels(stream RegisterChannelRequest) returns(RegisterChannelResponse) {}
    rpc UseChannel(stream ApplicationMessage) returns (stream ApplicationMessage) {}
}

message RegisterChannelRequest {
    RequirementsContract requirements_contract = 1;
}

message RegisterChannelResponse {
    string session_id = 1;
}


